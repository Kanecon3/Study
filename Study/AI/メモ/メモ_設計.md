# クラス設計の鉄則 まとめ

> 5月号の「クラス設計の鉄則」という特集記事に基づき、クラス設計の基本的な考え方と実践的な指針、そして設計の劣化を防ぐための対策について要約します。

## 第1章 クラス設計再入門

この章は、モジュール性・関心の分離・依存関係の3点を中心に、クラス設計の基本的な考え方と実践的な手法を解説しています。

堅牢で変更に強いコードを作り上げるための、**クラス設計の基本**を学びましょう。

### ソフトウェアシステム構築の基本課題

ソフトウェアシステムの構築では、複雑さの整理と、修正・拡張のしやすさが大きな課題になります。

大規模なシステムは小さな部品に分割して組み立て、変化に柔軟に対応できる設計が求められます。そのための仕組みが「クラス」です。

### 設計を考えるときの視点

全体をわかりやすく整理し、変更容易性を確保するためのクラス設計の視点は、次の3つを意識することが役に立ちます。

- モジュール性
- 関心の分離
- 依存関係

### モジュール性

「モジュール性」とは、システム全体が独立性の高い部品の組み合わせで構成されている度合いです。

モジュール性の高いシステムには次の特徴があります。

- ひとつひとつの部品（モジュール）の役割が明確
- 部品と部品の接続方法が明確
- 部品の交換や追加が容易

クラスは、ソフトウェアをモジュールに分割する手段の1つです。

大きなプログラムを役割が明確なクラスに分解し、クラス間の接続方法を定義します。クラス間の接続方法とは、具体的にはメソッド呼び出しです。

#### 大きな泥団子

クラスを分割しても、ただメソッドを呼び出し合うだけではモジュール性は高まりません。

クラスとメソッド呼び出しでシステムを構築しても、構造がわかりにくく変更が困難なシステム、つまりモジュール性が低いソフトウェアになってしまうことはめずらしくありません。**大きな泥団子**と呼ばれるような、構造がわかりにくく変更が困難なシステムです。

こういうモジュール性の低いシステムでは、クラスの役割がはっきりしません。クラスとクラスの関係がわかりにくく、密接に関係するコードが異なるクラスに分散し、同じ機能のコードが複数のクラスに重複したりしています。その結果、ソフトウェアの修正や拡張はやっかいで危険な作業になります。

#### モジュールとしてのクラス

プログラムをモジュールに分割するアプローチはさまざまなスタイルがあります。

手続き的なプログラミングであれば、モジュールの基本単位は、一連の操作手順を処理の順番に記述した「手続き」です。手続きから手続きを呼び出す構造で全体を組み立てます。

関数的なプログラミングでは、モジュールの基本単位は、副作用のない（数学的な意味での）「関数」です。関数と関数を組み合わせて（合成して）新たな関数を定義することで全体を組み立てます。

```text
補足：「副作用のない（数学的な意味での）関数」について

数学でいう「関数」は、同じ入力に対して必ず同じ出力を返すものです。たとえば、f(x) = x + 1 なら、xに3を入れたら必ず4が返ってｋます。何回やっても結果は変わりません。

プログラミングでも「副作用がない関数」というのは、入力が同じなら出力も必ず同じで、関数の外の状態（変数やファイルなど）を変えたりしない関数のことを指します。

つまり、「数学的な意味での関数」とは、「入力と出力が一対一で決まっていて、他の影響を与えない関数」という意味です。
```

オブジェクト指向プログラミングでは、基本のモジュール単位は「クラス」です。**クラスは関連するデータとロジックを1つのモジュールとしてまとめるためのしくみ**です。

関連するデータとロジックをひとかたまりにする、クラスを使ったモジュール化の利点は次のとおりです。

- どのように分割し整理するかの方針に一貫性がある
- 同じデータに対する操作が1つのモジュールに集まり、異なるモジュールでの重複がなくなる
- あるデータに関連した変更の影響範囲が狭い範囲に限定される

### 関心の分離

### 依存関係


## 注釈
