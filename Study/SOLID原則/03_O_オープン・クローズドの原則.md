# オープン・クローズドの原則

- クラスは、機能拡張に対して開いていなければならず、変更に対して閉じていなければならない

既存のプログラムを触って機能を追加すると、元の機能の動作が怪しくなる＝テストが必要になってしまう。

## なぜこの原則が生まれたのか？

「変化にさらされながらも、長く安定したシステムを設計するにはどうしたらいいのだろうか？」  
「いかなるシステムも存在する限り変化する。長く使われ続けるようなシステムを開発する時は、そのことを意識していなければならない」  
こういったことを考えて、先人たちはこの原則を考えたはずです。

## 「修正に対して閉じている」とは

NGパターン:
- 機能を拡張できるのはいいが、クライアントのコードを変更しなければならない場合
- 古いシステム（拡張前のコード）でバグが出たら、古いシステムだけを修正すればよい設計になっていない。新しいシステム（拡張後のコード）も修正しないといけない

## どうやって実装する？

できればインターフェースに依存させる

- Strategyパターン
- Template MedhodパターンもしくはFactory Methodパターン
- 抽象クラス（抽象クラスでも出来るが、非推奨）

## どのくらいの拡張ポイントを持っていればよいのか？

開発をするうえで、拡張ポイントは適度の量にしなければなりません。やりすぎると可読性が落ちてしまうためです。  
「早まった抽象をしないことも、抽象をするくらい大事」

- 拡張ポイントを作ることは意識しておく
- 予想されるバリエーションがある個所は、予め拡張ポイントを作っておく
- （最初から見越して作れるのが一番良いが）バリエーションが増えた時点で今後もバリエーションが増えることが予想されるので、今後のためにも拡張ポイントを実装する
