# LLMがもっとも推論しやすいデータ形式は？

updated: 2025/05/07

## 概要

社内ナレッジをLLM（AI）に反映させる場合、Confluence上のナレッジをそのまま使うべきか、別の形式に出力した方が良いのか疑問に思ったので調べてみました。

## 結論

LLMがもっとも推論しやすいのは、「プレーンテキスト」および「Markdown」（Markdown記法で書かれたテキストファイル）です。**構造化された情報が必要な場合はMarkdown**がとくに推奨されます。

社内ナレッジをLLMに反映させるには、現時点ではMarkdownで記述するのが最適と考えます。

### 注意・補足

- RAGや一部の最新LLMではHTMLの構造情報も活用されつつあります。現場ではまずテキストベースに変換・整形して渡すのが推奨されます。
- 「推論しやすい＝処理（レスポンス）が速い」を表しています。
- あくまでも現時点（2025/05/07）での情報および結論になります。現在のLLMは進化が早く、ハードウェアやソフトウェアの進化によってタグ処理やノイズ処理が格段に速くなるかもしれません。

## 理由と解説

- **プレーンテキスト**
  - LLMは本質的にテキストデータを処理するため、装飾や余計なメタ情報のないプレーンテキストはもっとも直接的に理解・推論が可能です。
  - 余計なノイズがないため、情報抽出や意味理解に最適です。

- **Markdown**
  - Markdownはプレーンテキストをベースに、見出しやリスト、テーブルなどの**構造情報**を簡易に付与できる軽量マークアップ言語です。
  - **人間も読みやすく、LLMも読みやすいデータ形式です**。
  - LLMはMarkdownの記法を十分に理解しており、構造化された情報（例：セクション分け、箇条書き、表）があることで、情報の区切りや重要度をより適切に把握できます。

## データ形式の比較

| データ形式 | LLMの推論しやすさ | 主な理由 |
|---|---|---|
| プレーンテキスト | S | 余計な装飾がなく、直接的にテキストを処理できる |
| Markdown | S | 構造情報（見出し・箇条書きなど）を明示しつつ、テキストベースで処理可能 |
| HTML（クリーニング済み） | A | 不要なタグ除去後は処理しやすいが、前処理が必要 |
| Webサイト | B | DOM構造や動的生成により、安定した抽出が難しい |
| PDF | B | テキスト部分の抽出は可能だが、レイアウト依存でノイズが混入しやすい |
| PDF（テキストが画像） | C | OCRによる前処理が必要。OCRの誤認識のリスクが高い |
| Excel（表のみ） | B | 表構造は有用だが、セルの意味の解釈が必要 |
| Excel（セルの結合・画像あり） | C | 構造が複雑で、非テキスト要素の処理が困難 |
| Word | B | レイアウトや装飾によるノイズはあるが、テキスト中心なら処理可能 |

**HTMLやWebサイト、PDF、Excel、Wordなどの形式**は、まずテキストを抽出し、不要な装飾やノイズを除去する前処理が必須です。とくに画像や複雑なレイアウトが含まれる場合、LLM単体では情報を正確に抽出・推論することが困難です。

## 実務的アドバイス

- **LLMにデータを渡す際は、できるだけプレーンテキストまたはMarkdownに変換してから利用するのがベスト**です。
- Markdownは「見出し」「リスト」「テーブル」などの構造を明示できるため、**要件定義や設計書、FAQ、仕様書などの知識ベースにも最適**です。
- 既存のHTMLやWord、Excel、PDFなどから情報を抽出する場合は、**自動変換ツールやスクリプトでMarkdownまたはプレーンテキストに変換し、ノイズを除去する前処理を推奨**します。

---

## 追記：LLM時代の仕様書フォーマット

LLMを活用した開発においては、仕様書のフォーマットもMarkdownがもっとも推奨されます。

### 理由と背景

- LLMが理解しやすい構造
- 図やファイル構造も記述可能  
  **Mermaid記法**によるシーケンス図やフローチャート、ファイルツリー構造などもMarkdown内で表現でき、AIがシステム構造を視覚的に理解する助けになります。
- 人間とLLMの双方にとって可読性が高い  
  Markdownはエンジニアにも馴染み深く、GitHub・GitLabや各種ドキュメントツールとも親和性が高いため、チーム内での共有やレビューも容易です。

### 仕様書に含めるべき主な項目

AI時代でも、仕様書に記載すべき基本構成は従来と大きく変わりませんが、「AIが理解しやすい粒度・構造」で整理することが重要です。

- システムの目的・概要
- 主要な機能と詳細説明
- ユーザーインターフェース仕様（画面レイアウト、操作フロー等）
- データモデル（DB構造、データフロー等）
- システム制約（パフォーマンス、セキュリティ等）
- 技術スタック
- 関連システムとの連携仕様
- テスト計画・テスト項目
- スケジュールやマイルストーン

### フォーマット例（Markdown）

```markdown
# プロジェクト名

## 1. システム概要

- 目的
- 背景

## 2. 要件定義

### 2.1 機能要件

- 機能A
- 機能B

### 2.2 非機能要件

- パフォーマンス
- セキュリティ

## 3. システム構成

- 技術スタック
- アーキテクチャ図（Mermaid記法）

## 4. UI仕様

- 画面一覧
- 各画面のレイアウト（Mermaidや画像リンク）

## 5. データモデル

- ER図（Mermaid記法）
- テーブル定義

## 6. テスト計画

- テスト項目
- テスト手順

## 7. スケジュール
- マイルストーン
（必要に応じて、Mermaid記法による図やファイルツリーも挿入する）
```

### その他のポイント

- AIツール向けの補助ファイルも活用  
  重要なルールや仕様は.cursorrulesなどの補助ファイルにも記載し、AIエージェントが参照しやすくする方法も有効です。
- AIによる自動生成・レビューも活用  
  仕様書や設計書の自動生成ツール（例：GEAR.Indigo）や、AIによる仕様書レビューも今後ますます一般化します。

---
Obsidian tag:  
#memo  
#ai
#llm
